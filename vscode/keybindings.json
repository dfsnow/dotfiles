[
    // Use tab to cycle through editors in non-insert modes
    {
        "key": "tab",
        "command": "workbench.action.nextEditorInGroup",
        "when": "(editorFocus && neovim.mode != 'insert' && neovim.mode != 'visual' && neovim.mode != 'visualline') || (!inputFocus && !editorFocus)"
    },
    {
        "key": "shift+tab",
        "command": "workbench.action.previousEditorInGroup",
        "when": "(editorFocus && neovim.mode != 'insert' && neovim.mode != 'visual' && neovim.mode != 'visualline') || (!inputFocus && !editorFocus)"
    },
    // Ctrl + tab to cycle editor groups
    {
        "key": "ctrl+tab",
        "command": "workbench.action.focusNextGroup",
        "when": "editorFocus"
    },
    {
        "key": "ctrl+shift+tab",
        "command": "workbench.action.focusPreviousGroup",
        "when": "editorFocus"
    },
    // Use tab to in/outdent in insert mode
    {
        "key": "tab",
        "command": "editor.action.indentLines",
        "when": "(editorFocus && (neovim.mode == 'visual' || neovim.mode == 'visualline'))"
    },
    {
        "key": "shift+tab",
        "command": "editor.action.outdentLines",
        "when": "(editorFocus && (neovim.mode == 'visual' || neovim.mode == 'visualline'))"
    },
    // Use tab to select from suggestions
    {
        "key": "tab",
        "command": "selectNextCodeAction",
        "when": "editorFocus && codeActionMenuVisible"
    },
    {
        "key": "shift+tab",
        "command": "selectPrevCodeAction",
        "when": "editorFocus && codeActionMenuVisible"
    },
    {
        "key": "tab",
        "command": "selectNextSuggestion",
        "when": "editorTextFocus && suggestWidgetMultipleSuggestions && suggestWidgetVisible"
    },
    {
        "key": "shift+tab",
        "command": "selectPrevSuggestion",
        "when": "editorTextFocus && suggestWidgetMultipleSuggestions && suggestWidgetVisible"
    },
    // Open file from explorer
    {
        "key": "o",
        "command": "explorer.openAndPassFocus",
        "when": "filesExplorerFocus && foldersViewVisible && !explorerResourceIsFolder && !inputFocus"
    },
    // Open current working directory in system explorer
    {
        "key": "cmd+shift+o",
        "command": "workbench.action.files.openFolder",
        "when": "openFolderWorkspaceSupport"
    },
    {
        "key": "ctrl+shift+o",
        "command": "workbench.action.files.openFolder",
        "when": "openFolderWorkspaceSupport"
    },
    // Better shortcuts for workbench views
    {
        "key": "cmd+e",
        "command": "workbench.action.focusActiveEditorGroup"
    },
    {
        "key": "ctrl+e",
        "command": "workbench.action.focusActiveEditorGroup"
    },
    {
        "key": "cmd+j",
        "command": "workbench.action.positronConsole.open"
    },
    {
        "key": "ctrl+j",
        "command": "workbench.action.positronConsole.open"
    },
    {
        "key": "cmd+l",
        "command": "workbench.action.toggleAuxiliaryBar"
    },
    {
        "key": "ctrl+l",
        "command": "workbench.action.toggleAuxiliaryBar"
    },
    {
        "key": "cmd+r",
        "command": "workbench.action.toggleSidebarVisibility"
    },
    {
        "key": "ctrl+r",
        "command": "workbench.action.toggleSidebarVisibility"
    },
    {
        "key": "cmd+t",
        "command": "workbench.action.terminal.toggleTerminal",
        "when": "terminal.active"
    },
    {
        "key": "ctrl+t",
        "command": "workbench.action.terminal.toggleTerminal",
        "when": "terminal.active"
    },
    // Open lazygit in dedicated terminal pane
    {
        "key": "cmd+shift+g",
        "command": "workbench.action.tasks.runTask",
        "args": "editor_after_lazygit"
    },
    {
        "key": "ctrl+shift+g",
        "command": "workbench.action.tasks.runTask",
        "args": "editor_after_lazygit"
    },
    // Open tab at index
    {
        "key": "cmd+1",
        "command": "workbench.action.openEditorAtIndex1"
    },
    {
        "key": "ctrl+1",
        "command": "workbench.action.openEditorAtIndex1"
    },
    {
        "key": "cmd+2",
        "command": "workbench.action.openEditorAtIndex2"
    },
    {
        "key": "ctrl+2",
        "command": "workbench.action.openEditorAtIndex2"
    },
    {
        "key": "cmd+3",
        "command": "workbench.action.openEditorAtIndex3"
    },
    {
        "key": "ctrl+3",
        "command": "workbench.action.openEditorAtIndex3"
    },
    {
        "key": "cmd+4",
        "command": "workbench.action.openEditorAtIndex4"
    },
    {
        "key": "ctrl+4",
        "command": "workbench.action.openEditorAtIndex4"
    },
    {
        "key": "cmd+5",
        "command": "workbench.action.openEditorAtIndex5"
    },
    {
        "key": "ctrl+5",
        "command": "workbench.action.openEditorAtIndex5"
    },
    {
        "key": "cmd+6",
        "command": "workbench.action.openEditorAtIndex6"
    },
    {
        "key": "ctrl+6",
        "command": "workbench.action.openEditorAtIndex6"
    },
    {
        "key": "cmd+7",
        "command": "workbench.action.openEditorAtIndex7"
    },
    {
        "key": "ctrl+7",
        "command": "workbench.action.openEditorAtIndex7"
    },
    {
        "key": "cmd+8",
        "command": "workbench.action.openEditorAtIndex8"
    },
    {
        "key": "ctrl+8",
        "command": "workbench.action.openEditorAtIndex8"
    },
    {
        "key": "cmd+9",
        "command": "workbench.action.openEditorAtIndex9"
    },
    {
        "key": "ctrl+9",
        "command": "workbench.action.openEditorAtIndex9"
    },
    // Insert cursor above and below using vim keys
    {
        "key": "cmd+shift+j",
        "command": "editor.action.insertCursorBelow",
        "when": "editorTextFocus && !findInputFocussed && !replaceInputFocussed"
    },
    {
        "key": "ctrl+shift+j",
        "command": "editor.action.insertCursorBelow",
        "when": "editorTextFocus && !findInputFocussed && !replaceInputFocussed"
    },
    {
        "key": "cmd+shift+k",
        "command": "editor.action.insertCursorAbove",
        "when": "editorTextFocus && !findInputFocussed && !replaceInputFocussed"
    },
    {
        "key": "ctrl+shift+k",
        "command": "editor.action.insertCursorAbove",
        "when": "editorTextFocus && !findInputFocussed && !replaceInputFocussed"
    },
    // SQLTools execute query shortcuts
    {
        "key": "cmd+enter",
        "command": "sqltools.executeQuery",
        "when": "editorTextFocus && !findInputFocussed && !replaceInputFocussed && editorLangId == 'sql' && editorHasSelection"
    },
    {
        "key": "ctrl+enter",
        "command": "sqltools.executeQuery",
        "when": "editorTextFocus && !findInputFocussed && !replaceInputFocussed && editorLangId == 'sql' && editorHasSelection"
    },
    {
        "key": "cmd+enter",
        "command": "sqltools.executeCurrentQuery",
        "when": "editorTextFocus && !findInputFocussed && !replaceInputFocussed && editorLangId == 'sql'"
    },
    {
        "key": "ctrl+enter",
        "command": "sqltools.executeCurrentQuery",
        "when": "editorTextFocus && !findInputFocussed && !replaceInputFocussed && editorLangId == 'sql'"
    },
    {
        "key": "cmd+shift+enter",
        "command": "sqltools.executeQueryFromFile",
        "when": "editorTextFocus && !findInputFocussed && !replaceInputFocussed && editorLangId == 'sql'"
    },
    {
        "key": "ctrl+shift+enter",
        "command": "sqltools.executeQueryFromFile",
        "when": "editorTextFocus && !findInputFocussed && !replaceInputFocussed && editorLangId == 'sql'"
    },
    // Close terminals with same chord as editor
    {
        "key": "cmd+w",
        "command": "workbench.action.terminal.kill",
        "when": "terminalFocus && (terminalHasBeenCreated || terminalIsOpen || terminalProcessSupported)"
    },
    // Shift-enter for newlines in terminal
    {
        "key": "shift+enter",
        "command": "workbench.action.terminal.sendSequence",
        "args": {
            "text": "\\\r\n"
        },
        "when": "terminalFocus"
    },
    // Scroll hover with vim keys
    {
        "key": "k",
        "command": "editor.action.scrollUpHover",
        "when": "editorHoverFocused"
    },
    {
        "key": "j",
        "command": "editor.action.scrollDownHover",
        "when": "editorHoverFocused"
    },
    // Maximize current terminal or console
    {
        "key": "cmd+m",
        "command": "workbench.action.toggleMaximizedPanel",
        "when": "panelAlignment == 'center' || panelPosition != 'bottom' && panelPosition != 'top'"
    },
    {
        "key": "ctrl+m",
        "command": "workbench.action.toggleMaximizedPanel",
        "when": "panelAlignment == 'center' || panelPosition != 'bottom' && panelPosition != 'top'"
    },
    // Open Claude Code panel
    {
        "key": "cmd+shift+r",
        "command": "claude-vscode.sidebar.open"
    },
    {
        "key": "ctrl+shift+r",
        "command": "claude-vscode.sidebar.open"
    },
    // Close suggest widget with escape
    {
        "key": "escape",
        "command": "hideSuggestWidget",
        "when": "suggestWidgetVisible && neovim.mode == 'insert'"
    },
    // Reset zoom
    {
        "key": "cmd+0",
        "command": "workbench.action.zoomReset"
    },
    {
        "key": "ctrl+0",
        "command": "workbench.action.zoomReset"
    },
    // Cmd + enter to run notebook cells without moving to next cell
    {
        "key": "cmd+enter",
        "command": "notebook.cell.execute",
        "when": "notebookCellListFocused && notebookMissingKernelExtension && !notebookCellExecuting && notebookCellType == 'code' || notebookCellListFocused && !notebookCellExecuting && notebookCellType == 'code' && notebookKernelCount > 0 || notebookCellListFocused && !notebookCellExecuting && notebookCellType == 'code' && notebookKernelSourceCount > 0"
    },
    {
        "key": "ctrl+enter",
        "command": "-notebook.cell.execute",
        "when": "notebookCellListFocused && notebookMissingKernelExtension && !notebookCellExecuting && notebookCellType == 'code' || notebookCellListFocused && !notebookCellExecuting && notebookCellType == 'code' && notebookKernelCount > 0 || notebookCellListFocused && !notebookCellExecuting && notebookCellType == 'code' && notebookKernelSourceCount > 0"
    },
    {
        "key": "i",
        "command": "notebook.cell.edit",
        "when": "notebookCellListFocused && !editorHoverFocused && !inputFocus && !notebookOutputInputFocused"
    },
    // Capital R for rename
    {
        "key": "shift+r",
        "command": "editor.action.rename",
        "when": "(editorFocus && neovim.mode != 'insert' && neovim.mode != 'visual' && neovim.mode != 'visualline') && editorHasRenameProvider && editorTextFocus && !editorReadonly"
    },
    // Match VS Code options to neovim <leader> equivalents
    {
        "key": ", enter",
        "command": "workbench.action.positronConsole.executeCode",
        "when": "(editorFocus && neovim.mode != 'insert') && editorTextFocus && !notebookEditorFocused && !positronNotebookCellEditorFocused"
    },
    {
        "key": ", ,",
        "command": "workbench.action.quickOpen",
        "when": "editorFocus && neovim.mode != 'insert'"
    },
    {
        "key": ", .",
        "command": "editor.action.quickFix",
        "when": "editorHasCodeActionsProvider && textInputFocus && !editorReadonly && neovim.mode != 'insert'"
    },
    {
        "key": ", f f",
        "command": "workbench.action.quickOpen",
        "when": "editorFocus && neovim.mode != 'insert'"
    },
    {
        "key": ", shift+l",
        "command": "workbench.view.extensions",
        "when": "editorFocus && neovim.mode != 'insert'"
    },
    {
        "key": ", x",
        "command": "workbench.action.closeActiveEditor",
        "when": "editorFocus && neovim.mode != 'insert'"
    },
    {
        "key": ", n",
        "command": "editor.action.toggleWordWrap",
        "when": "editorFocus && neovim.mode != 'insert'"
    },
    {
        "key": ", w",
        "command": "workbench.action.files.save",
        "when": "editorFocus && neovim.mode != 'insert'"
    },
    {
      "key": ", c",
      "command": "editor.action.commentLine",
      "when": "editorTextFocus && !editorReadonly && neovim.mode != 'insert'"
    },
    // Fix search results opening in neovim insert mode
    {
        "key": "enter",
        "command": "runCommands",
        "args": {
            "commands": [
                "search.action.openResult",
                "vscode-neovim.escape"
            ]
        },
        "when": "fileMatchOrMatchFocus && searchViewletVisible && searchResultListFocused"
    },
    {
        "key": "cmd+e",
        "command": "runCommands",
        "args": {
            "commands": [
                "search.action.openResult",
                "vscode-neovim.escape"
            ]
        },
        "when": "fileMatchOrMatchFocus && searchViewletVisible && searchResultListFocused"
    },
    {
        "key": "ctrl+e",
        "command": "runCommands",
        "args": {
            "commands": [
                "search.action.openResult",
                "vscode-neovim.escape"
            ]
        },
        "when": "fileMatchOrMatchFocus && searchViewletVisible && searchResultListFocused"
    },
    {
        "key": "-",
        "command": "runCommands",
        "args": {
            "commands": [
                "search.action.openResult",
                "vscode-neovim.escape"
            ]
        },
        "when": "fileMatchOrMatchFocus && searchViewletVisible && searchResultListFocused"
    },
    // Clear search results with escape
    {
        "key": "escape",
        "command": "runCommands",
        "args": {
            "commands": [
                "search.action.clearSearchResults",
                "workbench.action.findInFiles"
            ]
        },
        "when": "(searchResultListFocused || searchInputBoxFocus)"
    },
    // Cycle focus between search results, search input box, and editor
    {
        "key": "cmd+shift+f",
        "command": "workbench.action.findInFiles"
    },
    {
        "key": "ctrl+shift+f",
        "command": "workbench.action.findInFiles"
    },
    {
        "key": ", f r",
        "command": "workbench.action.findInFiles",
        "when": "editorFocus && neovim.mode != 'insert'"
    },
    {
        "key": ", /",
        "command": "workbench.action.findInFiles",
        "when": "editorFocus && neovim.mode != 'insert'"
    },
    {
        "key": "cmd+shift+f",
        "command": "search.action.focusSearchList",
        "when": "hasSearchResult && !searchResultListFocused"
    },
    {
        "key": "ctrl+shift+f",
        "command": "search.action.focusSearchList",
        "when": "hasSearchResult && !searchResultListFocused"
    },
    {
        "key": ", f r",
        "command": "search.action.focusSearchList",
        "when": "hasSearchResult && !searchResultListFocused && (editorFocus && neovim.mode != 'insert')"
    },
    {
        "key": ", /",
        "command": "search.action.focusSearchList",
        "when": "hasSearchResult && !searchResultListFocused && (editorFocus && neovim.mode != 'insert')"
    },
    // Focus search results list on enter (not the editor)
    {
        "key": "cmd+enter",
        "command": "runCommands",
        "args": {
            "commands": [
                "search.action.focusNextSearchResult",
                "search.action.focusSearchList"
            ]
        },
        "when": "searchInputBoxFocus && hasSearchResult"
    },
    {
        "key": "ctrl+enter",
        "command": "runCommands",
        "args": {
            "commands": [
                "search.action.focusNextSearchResult",
                "search.action.focusSearchList"
            ]
        },
        "when": "searchInputBoxFocus && hasSearchResult"
    },
    // Multi-cursor commands for neovim using https://github.com/vscode-neovim/vscode-multi-cursor.nvim
    {
        "key": "ctrl+d",
        "command": "vscode-neovim.send",
        "args": "<C-d>",
        "when": "editorFocus && neovim.init"
    },
    {
        "key": "ctrl+shift+d",
        "command": "vscode-neovim.send",
        "args": "<C-f>",
        "when": "editorFocus && neovim.init"
    },
    {
        "key": "ctrl+shift+l",
        "command": "vscode-neovim.send",
        "args": "<C-l>",
        "when": "editorFocus && neovim.init"
    },
    // Replicate gitsigns neovim keybinds
    {
        "key": ", g b",
        "command": "gitlens.toggleLineBlame",
        "when": "editorFocus && neovim.mode != 'insert'"
    },
    {
        "key": ", g d",
        "command": "editor.action.dirtydiff.next",
        "when": "(editorFocus && neovim.mode != 'insert' && neovim.mode != 'visual' && neovim.mode != 'visualline')"
    },
    {
        "key": ", g shift+d",
        "command": "gitlens.externalDiff",
        "when": "(editorFocus && neovim.mode != 'insert' && neovim.mode != 'visual' && neovim.mode != 'visualline')"
    },
    {
        "key": ", g n",
        "command": "workbench.action.editor.nextChange",
        "when": "(editorFocus && neovim.mode != 'insert' && neovim.mode != 'visual' && neovim.mode != 'visualline')"
    },
    {
        "key": ", g p",
        "command": "workbench.action.editor.previousChange",
        "when": "(editorFocus && neovim.mode != 'insert' && neovim.mode != 'visual' && neovim.mode != 'visualline')"
    },
    {
        "key": ", g u",
        "command": "git.revertSelectedRanges",
        "when": "editorFocus && neovim.mode != 'insert'"
    }
]
